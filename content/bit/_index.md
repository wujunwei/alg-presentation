+++
title = "bit Algorithm"
description = "Algorithm presentations"
outputs = ["Reveal"]
[reveal_hugo]
margin = 0.02
transition = "slide"
transition_speed = "slow"
theme="serif"
+++

### åŸºç¡€çŸ¥è¯†

|ç¬¦å·|æè¿°|è¿ç®—è§„åˆ™|
|:----:|:----:|:----:|
|&|ä¸|ä¸¤ä¸ªä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1|
|\||æˆ–|ä¸¤ä¸ªä½éƒ½ä¸º0æ—¶ï¼Œç»“æœæ‰ä¸º0|
|^|å¼‚æˆ–|ä¸¤ä¸ªä½ç›¸åŒä¸º0ï¼Œç›¸å¼‚ä¸º1|
|~|å–å|0å˜1ï¼Œ1å˜0|
|<<|å·¦ç§»|å„äºŒè¿›ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0|
|>>|å³ç§»|å„äºŒè¿›ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½|

---

##### ğŸ’¡tips

{{% section %}}

```c++
//åšä¹˜æ³•è¿ç®—
int a = 2;
a >> 1; // 1
a << 1; // 4
```

```c++
//åˆ¤æ–­å¥‡å¶
if(0 == (a & 1)) {
 //å¶æ•°
}
```

```c++
// æ”¹å˜ç¬¦å·
int reversal(int a) {
  return ~a + 1;
}
```
---

|åŠŸèƒ½|ç¤ºä¾‹|ä½è¿ç®—|
|:----:|:----:|:----:|
| æŠŠå³æ•°ç¬¬kä½å˜æˆ1| (101001->101101,k=3)| x \| (1 << (k-1)) |
| æŠŠå³æ•°ç¬¬kä½å˜æˆ0| (101101->101001,k=3)| x & ~ (1 << (k-1)) |
| å³æ•°ç¬¬kä½å–å| (101001->101101,k=3)| x ^ (1 << (k-1)) |
| å–æœ«ä¸‰ä½| (1101101->101)| x & 7 |
| å–æœ«kä½| (1101101->1101,k=5)| x & (1 << k-1) |
| æŠŠå³è¾¹è¿ç»­çš„1å˜æˆ0| (100101111->100100000)| x & (x+1) |
| æŠŠå³èµ·ç¬¬ä¸€ä¸ª0å˜æˆ1| (100101111->100111111)| x \| (x+1) |
| æŠŠå³è¾¹è¿ç»­çš„0å˜æˆ1| (11011000->11011111)| x \| (x-1) |
| å–å³è¾¹è¿ç»­çš„1| (100101111->1111)| (x ^ (x+1)) >> 1 |
| æŠŠå³èµ·ç¬¬ä¸€ä¸ª1å˜æˆ0| (100101000->100100000)| x ^ (x-1) |


{{% /section %}}

---

<small> ç»™å®šä¸€ä¸ªéç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚</small>


ç¤ºä¾‹ 1:
```
è¾“å…¥: [2,2,1]
è¾“å‡º: 1
```

ç¤ºä¾‹ 2:
```
è¾“å…¥: [4,1,2,1,2]
è¾“å‡º: 4
```

---

### answer

```go
package main
func singleNumber(nums []int) int {
	result := 0
	for _,num :=range nums{
		result ^=num
	}
	return result
}
```

---

<small> ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œå…¶ä¸­æ°å¥½æœ‰ä¸¤ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ï¼Œå…¶ä½™æ‰€æœ‰å…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚ æ‰¾å‡ºåªå‡ºç°ä¸€æ¬¡çš„é‚£ä¸¤ä¸ªå…ƒç´ ã€‚</small>

ç¤ºä¾‹ :
```
è¾“å…¥: [1,2,1,3,2,5]
è¾“å‡º: [3,5]
```

---

### answer

{{% section %}}

#### ç¬¬ä¸€æ­¥ï¼š
æŠŠæ‰€æœ‰çš„å…ƒç´ è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¼‚æˆ–å€¼ã€‚å› ä¸ºæ˜¯ä¸åŒçš„ä¸¤ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼å¿…å®šä¸ä¸º 0ï¼›

```c++
int xor = 0;
for (int num : nums) {
    xor ^= num;
}
//xor=3^5(11^101=110)
```


      
---

ç¬¬äºŒæ­¥ï¼š
å–xoræœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸º 1 çš„æ•°å­—ä½œä¸º maskï¼Œè¡¨ç¤ºä¸¤ä¸ªæ•°å­—åœ¨è¿™ä¸€ä½ä¸Šä¸åŒã€‚

```c++
int mask = xor & (-xor);//mask = 2(10)
```        


---

ç¬¬ä¸‰æ­¥ï¼š

![](/images/mask.png)

---
```golang
package main
func singleNumber(arr []int) []int {
	var result []int
	if arr == nil {
		return result
	}
	xor := 0
	// è®¡ç®—æ•°ç»„ä¸­æ‰€æœ‰æ•°å­—å¼‚æˆ–çš„ç»“æœ
	for _, v := range arr {
		xor ^= v
	}
	position := 0
	for i := xor; i&1 == 0; i >>= 1 {
		position++
	}
	// å¼‚æˆ–çš„ç»“æœä¸æ‰€æœ‰ç¬¬positionä½ä¸º1çš„æ•°å­—å¼‚æˆ–
	// ç»“æœä¸€å®šæ˜¯å‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªæ•°ä¸­çš„ä¸€ä¸ª
	tempXor := xor
	for _, v := range arr {
		if (uint(v)>>uint(position))&1 == 1 {
			xor ^= v
		}
	}
	// å¾—åˆ°å¦å¤–ä¸€ä¸ªå‡ºç°ä¸€æ¬¡çš„æ•°å­—
	return []int{xor, xor ^ tempXor}
}
```

{{% /section %}}

---

#### [è¿”å›](/#/6)


